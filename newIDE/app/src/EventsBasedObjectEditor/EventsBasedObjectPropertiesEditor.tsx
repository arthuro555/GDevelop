// @ts-expect-error - TS7016 - Could not find a declaration file for module '@lingui/macro'. '/home/arthuro555/code/GDevelop/newIDE/app/node_modules/@lingui/macro/index.js' implicitly has an 'any' type.
import {Trans} from '@lingui/macro';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '@lingui/macro'. '/home/arthuro555/code/GDevelop/newIDE/app/node_modules/@lingui/macro/index.js' implicitly has an 'any' type.
import { t } from '@lingui/macro';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '@lingui/react'. '/home/arthuro555/code/GDevelop/newIDE/app/node_modules/@lingui/react/index.js' implicitly has an 'any' type.
import { I18n } from '@lingui/react';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '@lingui/core'. '/home/arthuro555/code/GDevelop/newIDE/app/node_modules/@lingui/core/index.js' implicitly has an 'any' type.
import { I18n as I18nType } from '@lingui/core';
import * as React from 'react';
// @ts-expect-error - TS6142 - Module '../UI/Grid' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/Grid.tsx', but '--jsx' is not set.
import { Column, Line } from '../UI/Grid';
// @ts-expect-error - TS6142 - Module '../UI/SelectField' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/SelectField.tsx', but '--jsx' is not set.
import SelectField from '../UI/SelectField';
// @ts-expect-error - TS6142 - Module '../UI/SelectOption' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/SelectOption.tsx', but '--jsx' is not set.
import SelectOption from '../UI/SelectOption';
import { mapFor, mapVector } from '../Utils/MapFor';
// @ts-expect-error - TS6142 - Module '../UI/RaisedButton' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/RaisedButton.tsx', but '--jsx' is not set.
import RaisedButton from '../UI/RaisedButton';
// @ts-expect-error - TS6142 - Module '../UI/IconButton' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/IconButton.tsx', but '--jsx' is not set.
import IconButton from '../UI/IconButton';
// @ts-expect-error - TS6142 - Module '../UI/EmptyMessage' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/EmptyMessage.tsx', but '--jsx' is not set.
import EmptyMessage from '../UI/EmptyMessage';
// @ts-expect-error - TS6142 - Module '../UI/Menu/ElementWithMenu' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/Menu/ElementWithMenu.tsx', but '--jsx' is not set.
import ElementWithMenu from '../UI/Menu/ElementWithMenu';
// @ts-expect-error - TS6142 - Module '../UI/SemiControlledTextField' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/SemiControlledTextField.tsx', but '--jsx' is not set.
import SemiControlledTextField from '../UI/SemiControlledTextField';
// @ts-expect-error - TS6142 - Module '../UI/MiniToolbar' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/MiniToolbar.tsx', but '--jsx' is not set.
import MiniToolbar from '../UI/MiniToolbar';
import newNameGenerator from '../Utils/NewNameGenerator';
// @ts-expect-error - TS6142 - Module '../UI/InlineCheckbox' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/InlineCheckbox.tsx', but '--jsx' is not set.
import InlineCheckbox from '../UI/InlineCheckbox';
// @ts-expect-error - TS6142 - Module '../UI/Layout' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/Layout.tsx', but '--jsx' is not set.
import { ResponsiveLineStackLayout, ColumnStackLayout } from '../UI/Layout';
// @ts-expect-error - TS6142 - Module '../StringArrayEditor' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/StringArrayEditor/index.tsx', but '--jsx' is not set.
import StringArrayEditor from '../StringArrayEditor';
// @ts-expect-error - TS6142 - Module '../UI/ColorField' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/ColorField/index.tsx', but '--jsx' is not set.
import ColorField from '../UI/ColorField';
// @ts-expect-error - TS6142 - Module '../UI/SemiControlledAutoComplete' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/SemiControlledAutoComplete.tsx', but '--jsx' is not set.
import SemiControlledAutoComplete from '../UI/SemiControlledAutoComplete';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '../UI/CustomSvgIcons/ThreeDotsMenu'. '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/CustomSvgIcons/ThreeDotsMenu.js' implicitly has an 'any' type.
import ThreeDotsMenu from '../UI/CustomSvgIcons/ThreeDotsMenu';
// @ts-expect-error - TS6142 - Module '../PropertiesEditor/PropertiesMapToSchema' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/PropertiesEditor/PropertiesMapToSchema.tsx', but '--jsx' is not set.
import { getMeasurementUnitShortLabel } from '../PropertiesEditor/PropertiesMapToSchema';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '../UI/CustomSvgIcons/Visibility'. '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/CustomSvgIcons/Visibility.js' implicitly has an 'any' type.
import Visibility from '../UI/CustomSvgIcons/Visibility';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '../UI/CustomSvgIcons/VisibilityOff'. '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/CustomSvgIcons/VisibilityOff.js' implicitly has an 'any' type.
import VisibilityOff from '../UI/CustomSvgIcons/VisibilityOff';
// @ts-expect-error - TS7016 - Could not find a declaration file for module '../UI/CustomSvgIcons/Add'. '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/CustomSvgIcons/Add.js' implicitly has an 'any' type.
import Add from '../UI/CustomSvgIcons/Add';
import useForceUpdate from '../Utils/UseForceUpdate';
// @ts-expect-error - TS6142 - Module '../UI/ScrollView' was resolved to '/home/arthuro555/code/GDevelop/newIDE/app/src/UI/ScrollView.tsx', but '--jsx' is not set.
import ScrollView, { ScrollViewInterface } from '../UI/ScrollView';

const gd: libGDevelop = global.gd;

type Props = {
  project: gdProject,
  extension: gdEventsFunctionsExtension,
  eventsBasedObject: gdEventsBasedObject,
  onPropertiesUpdated?: () => void,
  onRenameProperty: (oldName: string, newName: string) => void,
  onEventsFunctionsAdded: () => void
};

const styles = {
  propertiesContainer: {
    flex: 1,
  },
} as const;

// Those names are used internally by GDevelop.
const PROTECTED_PROPERTY_NAMES = ['name', 'type'];

const getValidatedPropertyName = (i18n: I18nType, properties: gdPropertiesContainer, newName: string): string => {
  const safeAndUniqueNewName = newNameGenerator(
    gd.Project.getSafeName(newName),
    tentativeNewName => {
      if (
        properties.has(tentativeNewName) ||
        PROTECTED_PROPERTY_NAMES.includes(tentativeNewName)
      ) {
        return true;
      }

      return false;
    }
  );

  return safeAndUniqueNewName;
};

const getExtraInfoArray = (property: gdNamedPropertyDescriptor) => {
  const extraInfoVector = property.getExtraInfo();
  return extraInfoVector.toJSArray();
};

export default function EventsBasedObjectPropertiesEditor({
  project,
  extension,
  eventsBasedObject,
  onPropertiesUpdated,
  onRenameProperty,
  onEventsFunctionsAdded,
}: Props) {
  const scrollView = React.useRef<ScrollViewInterface | null | undefined>(null);

  const forceUpdate = useForceUpdate();

  const addProperty = React.useCallback(
    () => {
      const properties = eventsBasedObject.getPropertyDescriptors();

      const newName = newNameGenerator('Property', name =>
        properties.has(name)
      );
      const property = properties.insertNew(newName, properties.getCount());
      property.setType('Number');
      forceUpdate();
      onPropertiesUpdated && onPropertiesUpdated();
    },
    [eventsBasedObject, forceUpdate, onPropertiesUpdated]
  );

  const removeProperty = React.useCallback(
    (name: string) => {
      const properties = eventsBasedObject.getPropertyDescriptors();

      properties.remove(name);
      forceUpdate();
      onPropertiesUpdated && onPropertiesUpdated();
    },
    [eventsBasedObject, forceUpdate, onPropertiesUpdated]
  );

  const moveProperty = React.useCallback(
    (oldIndex: number, newIndex: number) => {
      const properties = eventsBasedObject.getPropertyDescriptors();

      properties.move(oldIndex, newIndex);
      forceUpdate();
      onPropertiesUpdated && onPropertiesUpdated();
    },
    [eventsBasedObject, forceUpdate, onPropertiesUpdated]
  );

  const setChoiceExtraInfo = React.useCallback(
    (property: gdNamedPropertyDescriptor) => {
      return (newExtraInfo: Array<string>) => {
        const defaultValueIndex = getExtraInfoArray(property).indexOf(
          property.getValue()
        );
        const vectorString = new gd.VectorString();
        newExtraInfo.forEach(item => vectorString.push_back(item));
        property.setExtraInfo(vectorString);
        vectorString.delete();
        property.setValue(newExtraInfo[defaultValueIndex] || '');
        forceUpdate();
      };
    },
    [forceUpdate]
  );

  const getPropertyGroupNames = React.useCallback(
    (): Array<string> => {
      const properties = eventsBasedObject.getPropertyDescriptors();

      const groupNames = new Set<string>();
      for (let i = 0; i < properties.size(); i++) {
        const property = properties.at(i);
        const group = property.getGroup() || '';
        groupNames.add(group);
      }
      return [...groupNames].sort((a, b) => a.localeCompare(b));
    },
    [eventsBasedObject]
  );

  const properties = eventsBasedObject.getPropertyDescriptors();

  return (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
    <I18n>
{ /* @ts-expect-error - TS7031 - Binding element 'i18n' implicitly has an 'any' type. */}
      {({ i18n }) => (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
        <Column noMargin expand useFullHeight>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
          <ScrollView ref={scrollView}>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
            <Line noMargin>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
              <div style={styles.propertiesContainer}>
                {mapVector(
                  properties,
                  (property: gdNamedPropertyDescriptor, i: number) => (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                    <React.Fragment key={i}>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                      <MiniToolbar noPadding>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                        <Column expand noMargin>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                          <SemiControlledTextField
                            margin="none"
                            commitOnBlur
                            translatableHintText={t`Enter the property name`}
                            value={property.getName()}
// @ts-expect-error - TS7006 - Parameter 'newName' implicitly has an 'any' type.
                            onChange={newName => {
                              if (newName === property.getName()) return;

                              const validatedNewName = getValidatedPropertyName(
                                i18n,
                                properties,
                                newName
                              );
                              onRenameProperty(
                                property.getName(),
                                validatedNewName
                              );
                              property.setName(validatedNewName);

                              forceUpdate();
                              onPropertiesUpdated && onPropertiesUpdated();
                            }}
                            fullWidth
                          />
                        </Column>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                        <InlineCheckbox
                          label={
                            property.isHidden() ? (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <Trans>Hidden</Trans>
                            ) : (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <Trans>Visible in editor</Trans>
                            )
                          }
                          checked={!property.isHidden()}
// @ts-expect-error - TS7006 - Parameter 'e' implicitly has an 'any' type. | TS7006 - Parameter 'checked' implicitly has an 'any' type.
                          onCheck={(e, checked) => {
                            property.setHidden(!checked);
                            forceUpdate();
                            onPropertiesUpdated && onPropertiesUpdated();
                          }}
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                          checkedIcon={<Visibility />}
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                          uncheckedIcon={<VisibilityOff />}
                        />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                        <ElementWithMenu
                          element={
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                            <IconButton>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <ThreeDotsMenu />
                            </IconButton>
                          }
                          buildMenuTemplate={(i18n: I18nType) => [
                            {
                              label: i18n._(t`Delete`),
                              click: () => removeProperty(property.getName()),
                            },
                            { type: 'separator' },
                            {
                              label: i18n._(t`Move up`),
                              click: () => moveProperty(i, i - 1),
                              enabled: i - 1 >= 0,
                            },
                            {
                              label: i18n._(t`Move down`),
                              click: () => moveProperty(i, i + 1),
                              enabled: i + 1 < properties.getCount(),
                            },
                            {
                              label: i18n._(t`Generate expression and action`),
                              click: () => {
                                gd.PropertyFunctionGenerator.generateObjectGetterAndSetter(
                                  project,
                                  extension,
                                  eventsBasedObject,
                                  property
                                );
                                onEventsFunctionsAdded();
                              },
                              enabled: gd.PropertyFunctionGenerator.canGenerateGetterAndSetter(
                                eventsBasedObject,
                                property
                              ),
                            },
                          ]}
                        />
                      </MiniToolbar>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                      <Line>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                        <ColumnStackLayout expand noMargin>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                          <ResponsiveLineStackLayout noMargin>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                            <SelectField
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              floatingLabelText={<Trans>Type</Trans>}
                              value={property.getType()}
// @ts-expect-error - TS7006 - Parameter 'e' implicitly has an 'any' type. | TS7006 - Parameter 'i' implicitly has an 'any' type.
                              onChange={(e, i, value: string) => {
                                property.setType(value);
                                forceUpdate();
                                onPropertiesUpdated && onPropertiesUpdated();
                              }}
                              fullWidth
                            >
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <SelectOption value="Number" label={t`Number`} />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <SelectOption value="String" label={t`String`} />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <SelectOption
                                value="Boolean"
                                label={t`Boolean (checkbox)`}
                              />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <SelectOption
                                value="Choice"
                                label={t`String from a list of options (text)`}
                              />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                              <SelectOption
                                value="Color"
                                label={t`Color (text)`}
                              />
                            </SelectField>
                            {property.getType() === 'Number' && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <SelectField
                                floatingLabelText={
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                  <Trans>Measurement unit</Trans>
                                }
                                value={property.getMeasurementUnit().getName()}
// @ts-expect-error - TS7006 - Parameter 'e' implicitly has an 'any' type. | TS7006 - Parameter 'i' implicitly has an 'any' type.
                                onChange={(e, i, value: string) => {
                                  property.setMeasurementUnit(
                                    gd.MeasurementUnit.getDefaultMeasurementUnitByName(
                                      value
                                    )
                                  );
                                  forceUpdate();
                                  onPropertiesUpdated && onPropertiesUpdated();
                                }}
                                fullWidth
                              >
                                {mapFor(
                                  0,
                                  gd.MeasurementUnit.getDefaultMeasurementUnitsCount(),
// @ts-expect-error - TS7006 - Parameter 'i' implicitly has an 'any' type.
                                  i => {
                                    const measurementUnit = gd.MeasurementUnit.getDefaultMeasurementUnitAtIndex(
                                      i
                                    );
                                    const unitShortLabel = getMeasurementUnitShortLabel(
                                      measurementUnit
                                    );
                                    const label =
                                      measurementUnit.getLabel() +
                                      (unitShortLabel.length > 0
                                        ? ' — ' + unitShortLabel
                                        : '');
                                    return (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                      <SelectOption
                                        value={measurementUnit.getName()}
                                        label={label}
                                      />
                                    );
                                  }
                                )}
                              </SelectField>
                            )}
                            {(property.getType() === 'String' ||
                              property.getType() === 'Number') && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <SemiControlledTextField
                                commitOnBlur
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                floatingLabelText={<Trans>Default value</Trans>}
                                hintText={
                                  property.getType() === 'Number'
                                    ? '123'
                                    : 'ABC'
                                }
                                value={property.getValue()}
// @ts-expect-error - TS7006 - Parameter 'newValue' implicitly has an 'any' type.
                                onChange={newValue => {
                                  property.setValue(newValue);
                                  forceUpdate();
                                  onPropertiesUpdated && onPropertiesUpdated();
                                }}
                                fullWidth
                              />
                            )}
                            {property.getType() === 'Boolean' && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <SelectField
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                floatingLabelText={<Trans>Default value</Trans>}
                                value={
                                  property.getValue() === 'true'
                                    ? 'true'
                                    : 'false'
                                }
// @ts-expect-error - TS7006 - Parameter 'e' implicitly has an 'any' type. | TS7006 - Parameter 'i' implicitly has an 'any' type. | TS7006 - Parameter 'value' implicitly has an 'any' type.
                                onChange={(e, i, value) => {
                                  property.setValue(value);
                                  forceUpdate();
                                  onPropertiesUpdated && onPropertiesUpdated();
                                }}
                                fullWidth
                              >
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                                <SelectOption
                                  value="true"
                                  label={t`True (checked)`}
                                />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                                <SelectOption
                                  value="false"
                                  label={t`False (not checked)`}
                                />
                              </SelectField>
                            )}
                            {property.getType() === 'Choice' && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              <SelectField
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                floatingLabelText={<Trans>Default value</Trans>}
                                value={property.getValue()}
// @ts-expect-error - TS7006 - Parameter 'e' implicitly has an 'any' type. | TS7006 - Parameter 'i' implicitly has an 'any' type. | TS7006 - Parameter 'value' implicitly has an 'any' type.
                                onChange={(e, i, value) => {
                                  property.setValue(value);
                                  forceUpdate();
                                  onPropertiesUpdated && onPropertiesUpdated();
                                }}
                                fullWidth
                              >
                                {getExtraInfoArray(property).map(
// @ts-expect-error - TS7006 - Parameter 'choice' implicitly has an 'any' type. | TS7006 - Parameter 'index' implicitly has an 'any' type.
                                  (choice, index) => (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                                    <SelectOption
                                      key={index}
                                      value={choice}
                                      label={choice}
                                    />
                                  )
                                )}
                              </SelectField>
                            )}
                          </ResponsiveLineStackLayout>
                          {property.getType() === 'Choice' && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                            <StringArrayEditor
                              extraInfo={getExtraInfoArray(property)}
                              setExtraInfo={setChoiceExtraInfo(property)}
                            />
                          )}
                          {property.getType() === 'Color' && (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                            <ColorField
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              floatingLabelText={<Trans>Color</Trans>}
                              disableAlpha
                              fullWidth
                              color={property.getValue()}
// @ts-expect-error - TS7006 - Parameter 'color' implicitly has an 'any' type.
                              onChange={color => {
                                property.setValue(color);
                                forceUpdate();
                                onPropertiesUpdated && onPropertiesUpdated();
                              }}
                            />
                          )}
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                          <ResponsiveLineStackLayout noMargin>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                            <SemiControlledTextField
                              commitOnBlur
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              floatingLabelText={<Trans>Short label</Trans>}
                              translatableHintText={t`Make the purpose of the property easy to understand`}
                              floatingLabelFixed
                              value={property.getLabel()}
// @ts-expect-error - TS7006 - Parameter 'text' implicitly has an 'any' type.
                              onChange={text => {
                                property.setLabel(text);
                                forceUpdate();
                              }}
                              fullWidth
                            />
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                            <SemiControlledAutoComplete
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                              floatingLabelText={<Trans>Group name</Trans>}
                              hintText={t`Leave it empty to use the default group`}
                              fullWidth
                              value={property.getGroup()}
// @ts-expect-error - TS7006 - Parameter 'text' implicitly has an 'any' type.
                              onChange={text => {
                                property.setGroup(text);
                                forceUpdate();
                                onPropertiesUpdated && onPropertiesUpdated();
                              }}
                              dataSource={getPropertyGroupNames().map(name => ({
                                text: name,
                                value: name,
                              }))}
                              openOnFocus={true}
                            />
                          </ResponsiveLineStackLayout>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                          <SemiControlledTextField
                            commitOnBlur
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                            floatingLabelText={<Trans>Description</Trans>}
                            translatableHintText={t`Optionally, explain the purpose of the property in more details`}
                            floatingLabelFixed
                            value={property.getDescription()}
// @ts-expect-error - TS7006 - Parameter 'text' implicitly has an 'any' type.
                            onChange={text => {
                              property.setDescription(text);
                              forceUpdate();
                            }}
                            fullWidth
                          />
                        </ColumnStackLayout>
                      </Line>
                    </React.Fragment>
                  )
                )}
                {properties.getCount() === 0 ? (
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                  <EmptyMessage>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                    <Trans>
                      No properties for this object. Add one to store data
                      inside this object (for example: health, ammo, speed,
                      etc...)
                    </Trans>
                  </EmptyMessage>
                ) : null}
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                <Column>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                  <Line justifyContent="flex-end" expand>
{ /* @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided. */}
                    <RaisedButton
                      primary
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                      label={<Trans>Add a property</Trans>}
                      onClick={addProperty}
// @ts-expect-error - TS17004 - Cannot use JSX unless the '--jsx' flag is provided.
                      icon={<Add />}
                    />
                  </Line>
                </Column>
              </div>
            </Line>
          </ScrollView>
        </Column>
      )}
    </I18n>
  );
}
